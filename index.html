<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoRush</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo">EcoRush</a>
            <ul class="nav-links">
                <li><a href="#features">Features</a></li>
                <li><a href="#download">Download</a></li>
                <li><a href="#documentation">Documentation</a></li>
                <li><a href="#community">Community</a></li>
                <li><a href="#showcase">Showcase</a></li>
                <li><a href="#" class="login-btn" onclick="openModal('loginModal')">Login</a></li>
            </ul>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">√ó</span>
            <div class="login-container">
                <h2>Welcome Back</h2>
                <p class="login-subtitle">Sign in to your Phoenix Engine account</p>
                <div id="loginMessage" class="login-message" style="display: none;"></div>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" name="password" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" name="remember"> Remember me
                        </label>
                        <a href="#" class="forgot-password">Forgot password?</a>
                    </div>
                    <button type="submit" class="login-submit btn btn-primary">Sign In</button>
                </form>
                <p class="signup-link">Don't have an account? <a href="#" onclick="switchModal('loginModal', 'signupModal')">Sign up</a></p>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signupModal')">√ó</span>
            <div class="login-container">
                <h2>Create Account</h2>
                <p class="login-subtitle">Join the EcoRush heroes</p>
                <div id="signupMessage" class="login-message" style="display: none;"></div>
                <form id="signupForm" onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" name="password" required>
                        <small>At least 8 characters with letters and numbers</small>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" name="terms" required> I agree to the Terms of Service
                        </label>
                    </div>
                    <button type="submit" class="login-submit btn btn-primary">Create Account</button>
                </form>
                <p class="signup-link">Already have an account? <a href="#" onclick="switchModal('signupModal', 'loginModal')">Sign in</a></p>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1>EcoRush<br>Gamified Education</h1>
                <p class="tagline">Oh no! Multiple monsters from unknown sources are scattered everywhere destroying our planet. Quick, install the game and help us save our planet!</p>
                <div class="cta-buttons">
                    <a href="#download" class="btn btn-primary">Download Free</a>
                    <a href="#features" class="btn btn-secondary">Get Started</a>
                </div>
                <p>Latest: v4.2.1 ‚Ä¢ MIT Licensed ‚Ä¢ Cross-Platform</p>
            </div>
            <div class="hero-visual">
                <div class="engine-preview floating">
                    <div class="preview-screen">
                        // EcoRush Game Engine
                        const game = new EcoRush();
                        game.init({
                            mode: 'arcade',
                            level: 'beginner',
                            theme: 'eco-warrior'
                        });
                        game.start();
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="features-container">
            <h2 class="section-title">Powerful Features</h2>
            <div class="features-grid">
                <div class="feature-card animate-fade-in">
                    <span class="feature-icon">üéÆ</span>
                    <h3>Game Style</h3>
                    <p>We all know that kids love to play games. This is right thing for them.</p>
                </div>
                <div class="feature-card animate-fade-in">
                    <span class="feature-icon">‚ö°</span>
                    <h3>A New Way of Education</h3>
                    <p>Documentaries and waste educations are slowly getting boring. Why not give it a twist?</p>
                </div>
                <div class="feature-card animate-fade-in">
                    <span class="feature-icon">üåê</span>
                    <h3>G-Rated</h3>
                    <p>No, this game does not include brutal executions, war crimes, or nuclear bombs. Only arcade style shooting which makes it child friendly.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Download Section -->
    <section id="download" class="download-section">
        <div class="download-container">
            <h2 class="download-title">Standard Edition</h2>
            <p class="download-subtitle">Play the basic version of the game for free.</p>
            <div class="download-buttons">
                <a href="#" class="btn btn-primary">üñ•Ô∏è Windows</a>
                <a href="#" class="btn btn-primary">üì± Android</a>
            </div>
        </div>
    </section>

    <!-- Ultimate Edition Section -->
    <section class="download-ultimate-section">
        <div class="download-ultimate-container">
            <h2 class="download-title">ULTIMATE EDITION!</h2>
            <p class="download-ultimate-subtitle">Play the full version of the game for a much better experience.</p>
            <div class="download-buttons">
                <a href="#" class="btn btn-primary">üñ•Ô∏è Windows</a>
                <a href="#" class="btn btn-primary">üì± Android</a>
            </div>
        </div>
    </section>

    <!-- Developers Section -->
    <section id="developers">
        <h2>Meet the Developers</h2>
        <div class="dev-wrapper">
            <button id="prevBtn">‚ùÆ</button>
            <div class="carousel-viewport">
                <div class="developer-carousel">
                    <div class="developer-card">
                        <img src="kirby.jpg" alt="Kirby Clarke Domingo">
                        <h3>Kirby Clarke Domingo</h3>
                        <p>Web and Game Developer</p>
                    </div>
                    <div class="developer-card">
                        <img src="mark.jpg" alt="Mark Kevin Aganon">
                        <h3>Mark Kevin Aganon</h3>
                        <p>Capstone Leader</p>
                    </div>
                    <div class="developer-card">
                        <img src="francine.jpg" alt="Francine Eslabra">
                        <h3>Francine Eslabra</h3>
                        <p>Documentator</p>
                    </div>
                    <div class="developer-card">
                        <img src="maxine.jpg" alt="Maxine Dagdag">
                        <h3>Maxine Dagdag</h3>
                        <p>Documentator</p>
                    </div>
                    <div class="developer-card">
                        <img src="dannica.jpg" alt="Dannica Shine Bernardo">
                        <h3>Dannica Shine Bernardo</h3>
                        <p>Documentator</p>
                    </div>
                </div>
            </div>
            <button id="nextBtn">‚ùØ</button>
        </div>
        <div class="indicators">
            <span class="active"></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>Engine</h4>
                <ul>
                    <li><a href="#download">Download</a></li>
                    <li><a href="#">Release Notes</a></li>
                    <li><a href="#">System Requirements</a></li>
                    <li><a href="#">License</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Learn17:20
                <ul>
                    <li><a href="#documentation">Documentation</a></li>
                    <li><a href="#">Tutorials</a></li>
                    <li><a href="#">API Reference</a></li>
                    <li><a href="#">Best Practices</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Community</h4>
                <ul>
                    <li><a href="#">Discord</a></li>
                    <li><a href="#">Forum</a></li>
                    <li><a href="#">Reddit</a></li>
                    <li><a href="#">Contributing</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Showcase</h4>
                <ul>
                    <li><a href="#showcase">Featured Games</a></li>
                    <li><a href="#">Asset Library</a></li>
                    <li><a href="#">Templates</a></li>
                    <li><a href="#">Gallery</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2024 Phoenix Engine Community. Licensed under MIT License.</p>
        </div>
    </footer>

    <script>
        // Modal handling
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.getElementById(modalId + 'Message').style.display = 'none';
        }

        function switchModal(closeId, openId) {
            closeModal(closeId);
            openModal(openId);
        }

        // Animation for elements with animate-fade-in class
        document.querySelectorAll('.animate-fade-in').forEach((element, index) => {
            setTimeout(() => {
                element.style.opacity = '1';
                element.style.transform = 'translateY(0)';
            }, index * 200);
        });

        // Floating animation for engine preview
        document.querySelector('.engine-preview').classList.add('floating');

        // Carousel handling
        const carousel = document.querySelector('.developer-carousel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.querySelectorAll('.indicators span');
        let currentIndex = 0;

        function updateCarousel() {
            carousel.style.transform = `translateX(-${currentIndex * 320}px)`;
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentIndex);
            });
        }

        prevBtn.addEventListener('click', () => {
            currentIndex = currentIndex > 0 ? currentIndex - 1 : 4;
            updateCarousel();
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = currentIndex < 4 ? currentIndex + 1 : 0;
            updateCarousel();
        });

        // Handle login form submission
        async function handleLogin(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.email.value;
            const password = form.password.value;
            const messageDiv = document.getElementById('loginMessage');
            const submitButton = form.querySelector('.login-submit');

            submitButton.disabled = true;
            messageDiv.style.display = 'none';

            try {
                const response = await fetch('/.netlify/functions/logActivity', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'login_attempt',
                        email: email,
                        timestamp: new Date().toISOString()
                    })
                });
                const result = await response.json();

                if (response.ok) {
                    messageDiv.className = 'login-message success';
                    messageDiv.textContent = result.message;
                } else {
                    messageDiv.className = 'login-message error';
                    messageDiv.textContent = result.error || 'Login failed. Please try again.';
                }
            } catch (error) {
                messageDiv.className = 'login-message error';
                messageDiv.textContent = 'An error occurred. Please try again.';
            } finally {
                messageDiv.style.display = 'block';
                submitButton.disabled = false;
            }
        }

        // Handle signup form submission
        async function handleSignup(event) {
            event.preventDefault();
            const form = event.target;
            const firstName = form.firstName.value;
            const lastName = form.lastName.value;
            const email = form.email.value;
            const password = form.password.value;
            const confirmPassword = form.confirmPassword.value;
            const messageDiv = document.getElementById('signupMessage');
            const submitButton = form.querySelector('.login-submit');

            if (password !== confirmPassword) {
                messageDiv.className = 'login-message error';
                messageDiv.textContent = 'Passwords do not match.';
                messageDiv.style.display = 'block';
                return;
            }

            submitButton.disabled = true;
            messageDiv.style.display = 'none';

            try {
                const response = await fetch('/.netlify/functions/logActivity', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'signup_attempt',
                        email: email,
                        firstName: firstName,
                        lastName: lastName,
                        timestamp: new Date().toISOString()
                    })
                });
                const result = await response.json();

                if (response.ok) {
                    messageDiv.className = 'login-message success';
                    messageDiv.textContent = result.message;
                } else {
                    messageDiv.className = 'login-message error';
                    messageDiv.textContent = result.error || 'Signup failed. Please try again.';
                }
            } catch (error) {
                messageDiv.className = 'login-message error';
                messageDiv.textContent = 'An error occurred. Please try again.';
            } finally {
                messageDiv.style.display = 'block';
                submitButton.disabled = false;
            }
        }
    </script>
</body>
</html>